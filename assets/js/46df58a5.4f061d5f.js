"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8126],{15680:(e,t,n)=>{n.r(t),n.d(t,{MDXContext:()=>p,MDXProvider:()=>m,mdx:()=>g,useMDXComponents:()=>s,withMDXComponents:()=>d});var o=n(96540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},a.apply(this,arguments)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=o.createContext({}),d=function(e){return function(t){var n=s(t.components);return o.createElement(e,a({},t,{components:n}))}},s=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},m=function(e){var t=s(e.components);return o.createElement(p.Provider,{value:t},e.children)},u="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=r,u=d["".concat(i,".").concat(m)]||d[m]||f[m]||a;return n?o.createElement(u,c(c({ref:t},p),{},{components:n})):o.createElement(u,c({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=h;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c[u]="string"==typeof e?e:r,i[1]=c;for(var p=2;p<a;p++)i[p]=n[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},14017:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>f,frontMatter:()=>c,metadata:()=>p,toc:()=>s});var o=n(58168),r=n(98587),a=(n(96540),n(15680)),i=["components"],c={id:"codegen",title:"Code Generation"},l=void 0,p={unversionedId:"codegen",id:"codegen",title:"Code Generation",description:"As explained in Writing Components, Litho relies on code generation in order to create Components from Component Specs. This process utilises intermediate ComponentSpec representations called SpecModels, which are immutable java objects.",source:"@site/../docs/codegen.md",sourceDirName:".",slug:"/codegen",permalink:"/docs/codegen",draft:!1,editUrl:"https://github.com/facebook/litho/edit/master/website/../docs/codegen.md",tags:[],version:"current",frontMatter:{id:"codegen",title:"Code Generation"}},d={},s=[{value:"Spec Model Creation",id:"spec-model-creation",level:4},{value:"Spec Model Validation",id:"spec-model-validation",level:4},{value:"Component Generation",id:"component-generation",level:4},{value:"Setting up Code Generation for your project",id:"setting-up-code-generation-for-your-project",level:4}],m={toc:s},u="wrapper";function f(e){var t=e.components,n=(0,r.A)(e,i);return(0,a.mdx)(u,(0,o.A)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,a.mdx)("p",null,"As explained in ",(0,a.mdx)("a",{parentName:"p",href:"/docs/writing-components"},"Writing Components"),", Litho relies on code generation in order to create ",(0,a.mdx)("em",{parentName:"p"},"Components")," from ",(0,a.mdx)("em",{parentName:"p"},"Component Specs"),". This process utilises intermediate ",(0,a.mdx)("em",{parentName:"p"},"ComponentSpec")," representations called ",(0,a.mdx)("a",{parentName:"p",href:"pathname:///javadoc/com/facebook/litho/specmodels/model/SpecModel.html"},"SpecModels"),", which are immutable java objects."),(0,a.mdx)("p",null,"Code generation comprises three main steps:"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},"Creating a Spec Model from a Component Spec."),(0,a.mdx)("li",{parentName:"ul"},"Spec Model Validation."),(0,a.mdx)("li",{parentName:"ul"},"Component generation from a given Spec Model.")),(0,a.mdx)("h4",{id:"spec-model-creation"},"Spec Model Creation"),(0,a.mdx)("p",null,"Spec models are created at compile time using an annotation processor, which is a tool in javac for scanning and processing annotations. The Litho annotation processor will process the annotations, methods and fields on your Component Specs and create a Spec Model for each one."),(0,a.mdx)("p",null,"In the future, we will add the ability to create Spec Models in other ways. For example, we want to be able to create Spec Models directly in Android Studio/Intellij, which would allow us to generate Components without having to build the source code."),(0,a.mdx)("h4",{id:"spec-model-validation"},"Spec Model Validation"),(0,a.mdx)("p",null,"Spec Models have a method called ",(0,a.mdx)("inlineCode",{parentName:"p"},"validate()"),", which returns a list of ",(0,a.mdx)("a",{parentName:"p",href:"pathname:///javadoc/com/facebook/litho/specmodels/model/SpecModelValidationError.html"},"SpecModelValidationErrors"),". If this list is empty then the Spec is well-formed and may be used to generate a valid Component. If not, then it will contain a list of errors that need fixing up before a valid Component may be generated."),(0,a.mdx)("h4",{id:"component-generation"},"Component Generation"),(0,a.mdx)("p",null,"If the validation step on a Spec Model is successful, then the ",(0,a.mdx)("inlineCode",{parentName:"p"},"generate")," method may be called. This will create a ",(0,a.mdx)("a",{parentName:"p",href:"https://github.com/square/javapoet"},"Javapoet")," ",(0,a.mdx)("inlineCode",{parentName:"p"},"TypeSpec")," which can then be easily used to create a Component class file."),(0,a.mdx)("h4",{id:"setting-up-code-generation-for-your-project"},"Setting up Code Generation for your project"),(0,a.mdx)("p",null,"If you set up your project using the instructions in the ",(0,a.mdx)("a",{parentName:"p",href:"/docs/getting-started"},"Getting Started")," section, then code generation will automatically take place on your project."))}f.isMDXComponent=!0}}]);