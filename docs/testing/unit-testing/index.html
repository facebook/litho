<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-44373548-28","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Litho" href="/opensearch.xml"><title data-react-helmet="true">Getting Started | Litho</title><meta data-react-helmet="true" property="og:url" content="https://fblitho.com/docs/testing/unit-testing"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Getting Started | Litho"><meta data-react-helmet="true" name="description" content="In order to use any of the testing utilities please include the litho-testing package in the"><meta data-react-helmet="true" property="og:description" content="In order to use any of the testing utilities please include the litho-testing package in the"><link data-react-helmet="true" rel="shortcut icon" href="/images/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://fblitho.com/docs/testing/unit-testing"><link data-react-helmet="true" rel="alternate" href="https://fblitho.com/docs/testing/unit-testing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://fblitho.com/docs/testing/unit-testing" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.7fecd722.css">
<link rel="preload" href="/assets/js/runtime~main.c13abd95.js" as="script">
<link rel="preload" href="/assets/js/main.f78999c6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/images/logo.svg" alt="Litho Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Litho</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/intro/motivation">Docs</a><a href="/javadoc" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a><a class="navbar__item navbar__link" href="/docs/tutorial/overview">Tutorial</a><a href="https://github.com/facebook/litho" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">What is Litho?</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Tutorial</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Main Concepts</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Building lists</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Widgets</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Developer Tools</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Testing</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/testing-overview">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Unit Tests</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/testing/unit-testing">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/subcomponent-testing">Sub-Component Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/prop-matching">Matching @Prop</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/testing-treeprops">Matching @TreeProp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/injectprop-matching">Matching @InjectProp</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/event-handler-testing">Event Handler Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/sections-testing">Testing Sections</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">UI Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/testing/tests-in-android-studio">Testing in Android Studio</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Animations</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Accessibility</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Performance</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Best Practices</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Deep Dive</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Contributing Documentation</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_1lV3"><div class="docItemContainer_zt2Y"><article><header><h1 class="docTitle_1y8q">Getting Started</h1></header><div class="markdown"><p>In order to use any of the testing utilities please include the <code>litho-testing</code> package in the
build. Add the following lines to the <code>dependencies</code> block in the <code>build.gradle</code> file:</p><pre class="prism-code language-groovy" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">testImplementation &#x27;com.facebook.litho:litho-testing:0.40.0&#x27;</span></div></pre><p>Litho&#x27;s testing APIs are exposed through fluid AssertJ methods. They are available as:</p><ul><li><a href="/javadoc/com/facebook/litho/testing/assertj/ComponentAssert.html" target="_blank" rel="noopener noreferrer">ComponentAssert</a>
for assertions that are run against either Component builders or Components.</li><li><a href="/javadoc/com/facebook/litho/testing/assertj/LithoViewAssert.html" target="_blank" rel="noopener noreferrer">LithoViewAssert</a>
for assertions against mounted UI hierarchies.</li></ul><p>For convenience, <a href="/javadoc/com/facebook/litho/testing/assertj/LithoAssertions.html" target="_blank" rel="noopener noreferrer">LithoAssertions.assertThat</a>
can be statically imported. It hosts all the APIs of <code>ComponentAssert</code>, and <code>LithoViewAssert</code>.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">import static com.facebook.litho.testing.assertj.LithoAssertions.assertThat;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="example"></a>Example<a class="hash-link" href="#example" title="Direct link to heading">#</a></h2><p>To demonstrate the usage of these APIs consider the following component that displays a like icon and
a short description.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Displays who liked the post.</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> *</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 1 - 3 likers =&gt; Comma separated names (e.g. Jane, Mike, Doug)</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> * &gt; 3 likers =&gt; Comma separated number denoting the like count</span></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span></span><span class="token-line" style="color:#393A34"><span class="token plain">@LayoutSpec</span></span><span class="token-line" style="color:#393A34"><span class="token plain">class LikersComponentSpec {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @OnCreateLayout</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  protected static Component onCreateLayout(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      ComponentContext c,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      @Prop List&lt;User&gt; likers) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return Row.create(c)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .alignItems(FLEX_START)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .child(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          Image.create(c)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            .drawableRes(R.drawable.like))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .child(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          Text.create(c)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            .text(formatLikers(likers))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            .textSizeSp(12)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            .ellipsize(TruncateAt.END))</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  private static String formatLikers(List&lt;User&gt; likers) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setup"></a>Setup<a class="hash-link" href="#setup" title="Direct link to heading">#</a></h2><p>To verify the rendering of the text and the icon.</p><ul><li>Create a new test class; <code>LikersComponentTest</code>.</li><li>Add <code>@RunWith(RobolectricTestRunner.class)</code> to the top of the test class.</li><li>Add a <code>LithoViewRule</code> JUnit <a href="https://github.com/junit-team/junit4/wiki/Rules" target="_blank" rel="noopener noreferrer"><code>@Rule</code></a> which
sets up overrides for <a href="https://developer.android.com/reference/android/R.styleable.html" target="_blank" rel="noopener noreferrer">Styleables</a>
and exposes some useful APIs.</li></ul><p>The test class should look like the following:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(RobolectricTestRunner.class)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LikersComponentTest {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public final @Rule LithoViewRule mLithoViewRule = new LithoViewRule();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="testing-component-rendering"></a>Testing component rendering<a class="hash-link" href="#testing-component-rendering" title="Direct link to heading">#</a></h2><p><code>LithoAssertions</code> exposes AssertJ-style APIs to assert what get rendered by a component. These APIs
will generally layout, mount and render the component before testing the assertions.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><pre tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">@RunWith(RobolectricTestRunner.class)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LikersComponentTest {</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public final @Rule LithoViewRule mLithoViewRule = new LithoViewRule();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public void whenTwoUsersLike_shouldShowBothUserNames() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    final ComponentContext c = mLithoViewRule.getContext();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    final ImmutableList&lt;User&gt; likers = ImmutableList.of(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      new User(&quot;Jane&quot;), new User(&quot;Mike&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    final LikersComponent component = LikersComponent.create(c)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .likers(likers)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    LithoAssertions.assertThat(c , component).hasVisibleText(&quot;Jane, Mike&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  @Test</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  public void whenUsersLike_shouldShowLikeIcon() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    final ComponentContext c = mLithoViewRule.getContext();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    final ImmutableList&lt;User&gt; likers = ImmutableList.of(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      new User(&quot;Jane&quot;), new User(&quot;Mike&quot;)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    final LikersComponent component = LikersComponent.create(c)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .likers(likers)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        .build();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    final Drawable likeIcon = c.getResources().getDrawable(R.drawable.like);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    LithoAssertions.assertThat(c , component).hasVisibleDrawable(likeIcon);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="additional-assertions"></a>Additional assertions<a class="hash-link" href="#additional-assertions" title="Direct link to heading">#</a></h2><p>There are several more assertions that can be tested using LithoAssertions. To see the entire
APIs please checkout its <a href="/javadoc/com/facebook/litho/testing/assertj/LithoAssertions.html" target="_blank" rel="noopener noreferrer">JavaDoc here</a>.
These APIs test assertions on the view heirarchy created by the mounted Component. So asserting
the presence of a Drawable in a Component will traverse the entire view hierarchy rendered by
the Component. Following are some of the assertions provided by LithoAssertions:</p><ul><li><code>LithoAssertions#hasVisibleTextMatching()</code></li><li><code>LithoAssertions#doesNotHaveVisibleText()</code></li><li><code>LithoAssertions#willRender()</code></li><li><code>LithoAssertions#doesNotHaveVisibleDrawable()</code></li><li><code>LithoAssertions#hasContentDescription()</code></li><li><code>LithoAssertions#willNotRender()</code></li></ul><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>When running Litho unit tests, be aware that the native library for Yoga must be loaded
which can pose some challenges depending on your build system of choice. With Gradle and
Robolectric, for instance, you may run into issues as Robolectric spins up new
<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html" target="_blank" rel="noopener noreferrer">ClassLoaders</a>
for every test suite with a different configuration. The same goes for PowerMock, which
prepares the ClassLoaders on a per-suite basis and leaves them in a non-reusable state.</p><p>The JVM has two important limitations that are relevant to this:</p><ol><li>A shared library can only ever be loaded once per process.</li><li><code>ClassLoader</code>s do not share information about the libraries loaded.</li></ol><p>Because of that, using multiple ClassLoaders for test runs is highly problematic
as every instance will attempt to load Yoga and every but the first will fail with
<code>libyoga.so already loaded in another classloader</code> exception.</p><p>The only way to avoid this is by either preventing the use of multiple ClassLoaders
or forking the process whenever a new ClassLoader is necessary.</p><p>Gradle allows you to limit the number of test classes a process can execute before
it is discarded. If you set the number to one, we avoid the ClassLoader reuse:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly groovy"><pre tabindex="0" class="prism-code language-groovy codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">android {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    [...]</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    testOptions {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        unitTests.all {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            forkEvery = 1</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            maxParallelForks = Math.ceil(Runtime.runtime.availableProcessors() * 1.5)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>With Buck, this behavior can be achieved by assigning test targets separate names
as those will result in a parallel process being spun up. Alternatively, you can
set the <code>fork_mode</code> to <code>per_test</code> as described
<a href="https://buckbuild.com/rule/java_test.html#fork_mode" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Ultimately, depending on your build system and the existing constraints of your
project, you may need to adjust the way in which your test runner utilizes
ClassLoaders. This is, however, not a problem unique to Litho but an unfortunate
consequence of mixing native and Java code in Android projects.</p></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/litho/edit/master/website/../docs/testing/unit-testing.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/testing/testing-overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/testing/subcomponent-testing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sub-Component Testing »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#example" class="table-of-contents__link">Example</a></li><li><a href="#setup" class="table-of-contents__link">Setup</a></li><li><a href="#testing-component-rendering" class="table-of-contents__link">Testing component rendering</a></li><li><a href="#additional-assertions" class="table-of-contents__link">Additional assertions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a href="/javadoc" target="_blank" rel="noopener noreferrer" class="footer__link-item">API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Open Source</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/contributing">How To Contribute</a></li><li class="footer__item"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Open Source Projects<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/litho" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/fblitho" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_MyFc"><img src="/images/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--light_3UqQ footer__logo"><img src="/images/oss_logo.png" alt="Facebook Open Source Logo" class="themedImage_1VuW themedImage--dark_hz6m footer__logo"></a></div><div class="footer__copyright">Copyright © 2021 Facebook, Inc.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c13abd95.js"></script>
<script src="/assets/js/main.f78999c6.js"></script>
</body>
</html>